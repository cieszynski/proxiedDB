<!DOCTYPE html>
<html lang="de">

<head>
    <title>proxiedDB</title>
    <meta charset="utf-8">

    <script src="proxieddb.js"></script>
    <script>
        proxiedDB('db1').builder(5).build({
            user: "@id, firstname, age, firstname+age"
        })
            .then(result => console.log(result))
            .catch(err => console.error(err));

        if (0) {

            [
                { firstname: 'Jupp', age: 20 },
                { firstname: 'jupp', age: 30 },
                { firstname: 'Klara', age: 10 },
                { firstname: 'Bob', age: 40 },
                { firstname: 'Benny', age: 50 }
            ].forEach(item => {
                proxiedDB('db1').user.add(item)
                    .then(result => console.log(result))
                    .catch(err => console.error(err))
            })
        }

        if (0) {
            proxiedDB('db1')
                .user.count()
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.get(proxiedDB.between(2, 5))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.where('firstname+age', proxiedDB.ge(['c', 5]), proxiedDB.ASC)
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.where('firstname', proxiedDB.between('ber', 'klara'))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.where('firstname', 'jupp', proxiedDB.DESCUNIQUE)
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.and('firstname', proxiedDB.between('b', 'c'), 'age', proxiedDB.gt(20))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.ignoreCase('firstname', 'bernd')
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) { // startsWith equivalent
            proxiedDB('db1')
                .user.where('firstname', proxiedDB.startsWith('Be'))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.updateOr(
                    'firstname', proxiedDB.startsWith('xu'),
                    'firstname', proxiedDB.startsWith('Bs'),
                    'age', proxiedDB.ge(35),
                    { a: 2 })
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.queryOr(
                    'firstname', proxiedDB.startsWith('ju'),
                    'firstname', proxiedDB.startsWith('Be'),
                    'age', proxiedDB.gt(30))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.deleteOr(
                    'firstname', proxiedDB.startsWith('Ju'),
                    'firstname', proxiedDB.startsWith('pee'),
                    'age', proxiedDB.ge(50))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (1) {
            proxiedDB('db1')
                .user.queryAnd(
                    'firstname', proxiedDB.startsWith('AbcD'),
                    //'age', proxiedDB.gt(730)//,
                    'age', proxiedDB.eq(880)
                    )
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.updateAnd(
                    'firstname', proxiedDB.startsWith('B'),
                    'age', proxiedDB.gt(0),
                    { b: 3 })
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.deleteAnd(
                    'firstname', proxiedDB.startsWith('ju'),
                    'age', proxiedDB.gt(0))
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            proxiedDB('db1')
                .user.insert([
                    { firstname: 'Jupp', age: 21 },
                    { firstname: 'Jupp', age: 22 },
                    { firstname: 'Jupp', age: 23 },
                ])
                .then(result => console.log(result))
                .catch(err => console.error(err))
        }

        if (0) {
            let a = proxiedDB('db1')
                .user.permutation('abcdefghijk').reduce((pre, cur, idx) => {
                    pre.push({
                        firstname: cur,
                        age: idx
                    })
                    return pre;
                }, [])
            proxiedDB('db1')
                .user.insert(a)
                .then(result => console.log(result))
                .catch(err => console.error(err))
/*                 let a = proxiedDB('db1')
                .user.permutation('abcdefghijk')
                console.log(a) */
        }

    </script>
</head>

<body>

</body>

</html>